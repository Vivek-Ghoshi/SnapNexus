<%- include('partials/header') %>
  <div class="w-full min-h-screen bg-gray-900 text-gray-100">
    <!-- Instagram-like header -->
    <header class="sticky top-0 z-50 bg-gray-900 border-b border-gray-700 py-2 px-4">
      <div class="flex items-center justify-between max-w-screen-lg mx-auto">
        <img class="h-8 invert" src="/images/logo.png" alt="Instagram">
        <div class="flex items-center space-x-4">
          <i class="text-2xl ri-add-box-line text-gray-100"></i>
          <i class="text-2xl ri-heart-3-line text-gray-100"></i>
          <i class="text-2xl ri-messenger-line text-gray-100"></i>
        </div>
      </div>
    </header>

    <!-- Stories section -->
    <div class="story px-4 flex gap-4 overflow-x-auto py-4 border-b border-gray-700">
      <div class="flex flex-col items-center flex-shrink-0">
        <div class="w-16 h-16 rounded-full border-2 border-gray-600 flex items-center justify-center">
          <div class="w-14 h-14 bg-gray-700 rounded-full flex items-center justify-center">
            <i class="text-2xl ri-add-line text-gray-300"></i>
          </div>
        </div>
        <span class="text-xs mt-1 text-gray-300">Your Story</span>
      </div>
      <!-- Repeat this block for each story -->
      <div class="flex flex-col items-center flex-shrink-0">
        <div class="w-16 h-16 rounded-full bg-gradient-to-tr from-yellow-400 to-fuchsia-600 p-0.5">
          <img class="w-full h-full rounded-full border-2 border-gray-900 object-cover"
            src="https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?q=80&w=2550&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
            alt="">
        </div>
        <span class="text-xs mt-1 text-gray-300">username</span>
      </div>
      <!-- ... more stories ... -->
    </div>

    <!-- Posts section -->
    <div class="posts mb-20 max-w-screen-sm mx-auto">
      <% posts.reverse().forEach(function(post){ %>
        <div class="post border-b border-gray-700 pb-4 mb-4">
          <!-- Post header -->
          <div class="flex items-center justify-between px-4 py-2">
            <div class="flex items-center space-x-2">
              <img class="w-8 h-8 rounded-full object-cover" src="/images/uploads/<%= post.user.profileImage %>" alt="">
              <span class="font-semibold text-sm text-gray-100"><%= post.user.username %></span>
            </div>
            <i class="ri-more-fill text-gray-300"></i>
          </div>

          <!-- Post image -->
          <div class="w-full aspect-square bg-gray-800 overflow-hidden">
            <img class="w-full h-full object-cover" src="/images/uploads/<%= post.Image %>" alt="">
          </div>

          <!-- Post actions -->
          <div class="px-4 py-2">
            <div class="flex justify-between items-center">
              <div class="flex space-x-4">
                <a href="/post/like/<%= post._id %>">
                  <i class="text-2xl <%= post.likes.indexOf(user._id) !== -1 ? 'ri-heart-fill text-red-500' : 'ri-heart-line text-gray-300' %>"></i>
                </a>
                <i class="text-2xl ri-chat-3-line text-gray-300"></i>
                <i class="text-2xl ri-send-plane-line text-gray-300"></i>
              </div>
              <i class="text-2xl ri-bookmark-line text-gray-300"></i>
            </div>
            <p class="font-semibold text-sm mt-2 text-gray-100"><%= post.likes.length %> likes</p>
          </div>

          <!-- Post caption and comments -->
          <div class="px-4">
            <p class="text-sm text-gray-200">
              <span class="font-semibold text-gray-100"><%= post.user.username %></span>
              <%= post.caption %>
            </p>
            <!-- ... existing comments code ... -->
          </div>

          <!-- Comment input -->
          <div class="px-4 mt-2">
            <form action="/post/comment/<%= post._id %>" method="post" class="flex items-center">
              <input 
                class="flex-grow bg-transparent text-sm text-gray-200 placeholder-gray-500 focus:outline-none"
                type="text" 
                name="comment" 
                placeholder="Add a comment..."
              >
              <button 
                type="submit" 
                class="text-sm font-semibold text-blue-400 ml-3 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed"
                disabled
              >
                Post
              </button>
            </form>
          </div>
        </div>
      <% }) %>
    </div>
  </div>

  <!-- ... existing script ... -->
<%- include('partials/footer') %>